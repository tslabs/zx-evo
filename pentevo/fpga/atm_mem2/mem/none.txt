при call 3dxx на 14мгц может не сработать старая включалка DOS: posedge z80_clock if mreq && m1
(точнее она сработает, но после считывания опкода...).
Надо придумать новую, с вводом паузы.
В соответствии с временем распространиения на 14мгц, правильные сигналы процессора
можно ловить только через ТАКТ после их идеального появления (в случае
без всех задержек).
сейчас CS на flash идет все время, пока стоит адрес ПЗУ-очка, потому работать будет
и на 14мгц просто РОМ. с включением по 3dxx: в момент переключения (mreq+rd+m1) до
конца цикла (момента считывания шины процессором) остаётся полтакта. Надо ещё минимум полтора такта
на 14мгц. Такую тормозилку надо предусмотреть. Способ тормоджение - на время блокируется
выработка zpos и zneg БЕЗ рассинхронизации. Побочный фефект - может 2 раза выработаться zpos или
zneg, хз насколько это ахтунгово.

Требуется переход на fclk в zports.v !

Пока пилю atm_pager дальше. Надо сделать DOS включалко-выключалку. Так как от каждого очка
включалко-выключалка своя, то сигналы от 4 пейджеров надо объединить потом.

неясно условие выключения ДОС - выполнение именно из РАМ? Или из пзу тоже, если на странице
с пзу не установлено dos_7ffd ?


14.03.2010

Надо заапдейтить zports (shadow+dos, новые порты),
прокинть провода в top.v,
прогнать на модели

16.03.2010

Надо сэмулировать DOSEN+CPM, и поверх них ввести shadow_en.
CPM перманентно зажимает триггер DOS во включенном состоянии.
Вопрос: чем DOSEN зажатый отличается от shadow_en?
Ответ: shadow_en включает атм-порты, но НЕ включает ROM-маппинг трдосовый.

Наборы атм-портов, они же DOS-порты:
+ВГ93
+xxF7 (atm memory)
+xx77 (atm config)

наборы не-дос портов, они же pent1m-порты:
+xxF7 (eff7+часики)
+xx77 (SD-карта)
+xx1F (кемсон-жойстик)

остальные порты - общие (в том числе xxBF - для включения shadow-портов и ROMRW)


17.03.2010

Переход zports.v на fclk: сначала надо сделать параллельный механизм стробов записи/чтения на fclk.
Потом постепенно (или по мере надобности) прибить старый.


18.03.2010

Осталось прокинуть провода в top.v
и модифицировать zmem.v (убрать дос, добавить ромрв)
еще в zports.v надо поменять логику eff7+7ffd. Чтобы просто выводило
номер страницы в пределах 1 метра, остальное разберемся в atm_pager.v

Нужны ли сигналы процессора в atm_pager.v ?
нужны для доса.


22.03.2010

В квартусе собирается. Надо сделать тестбенч.
Цель: обеспечить запуск неглюка+васики (64кб пзу) в симуляции.
надо перевести рому в верилог,
надо как-то выдавать картинки спековые.


24.03.2010

Что за поебень с генерацией дос_турн_офф ? всегда высирается из неактивных модулей атм_пагера.
fixed.

В неглюке доходит до опроса кнопок и опизживается - читаются иксы.
