формат и адреса регистров на spi-шине avr<>fpga.

напоминаю, установка номера - при spics_n=1, далее в 0 и шлЄм байт (1 или
несколько).


—татус подготавливаетс€ к выдаче (лочитс€) в момент spics_n 0->1.
Cтатус: (считываетс€ при spics_n=1 в момент записи номера):
bit.7 - Read-Not-Write (rnw): =1 - спектрум заваитилс€ на чтении, =0 - на записи.
bits.6..0 - какой девайс заваитил, если =1. ѕока есть
 bit.0 - если 1, заваитили глюк-часы.

„тобы только считать статус - надо сгенерировать фронт spics_n 0->1.
≈сли spics_n был в 1 - надо его передЄрнуть.


после передерга spics_n 0->1 номер заново надо ставить.


регистр $00 - дефолтный номер, в него можно писать, это пойдЄт в
игнор. ”станавливаетс€ автоматически в момент spics_n 0->1


регистр $80 - данные дл€ клавиатуры (40 бит сдвиговый рег), запоминаютс€
              последние 40 вдвинутых битов.
регистр $81 - в момент spics_n 0->1 с этим установленным регистром
уход€т данные в рабочий регистр клавиатуры (то, что записано было в $80).

регистр $40 - X coord мыши
        $41 - Y coord мыши
        $42 - кнопки мыши

каждый из регистров уходит в спектрум по факту spics_n 0->1

регистр $20 - регистр сброса - задает сам факт сброса Z80 и страничку пзу, в
которую сброситьс€. $20[5:4] задают номер страницы, куда сброситьс€. ‘акт
сброса - spics_n 0->1


часики:

$11 - регистр чтени€ адреса, который был установлен спектрумом дл€ глюкочасов.

$10 - регистр чтени€-записи данных, которые ожидает спектрум в ваите. “о, что
в него пишетс€ - идЄт в спектрум, если тот ваититс€ на чтении, или же из этого
регистра считываетс€ то, что спектрумом записано, если тот ваититс€ на записи.
ѕосле обмена, в момент spics_n 0->1 спектрум разваитиваетс€, прерывание на
аврку снимаетс€, из статуса битик обнул€етс€.

регистр $10 общий дл€ всех ваит-портов


 онфиг - регистры:

config0: $08 - только на запись, бит 0 - включение ¬√ј (=1)
         регистр актуализируетс€ после записи данных по фронту spics_n 0->1.

